<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>~/Dropbox/workspace/web/sheets/regex.sh.html</title>
<meta name="Generator" content="Vim/8.0">
<meta name="plugin-version" content="vim7.4_v2">
<meta name="syntax" content="sh">
<meta name="settings" content="use_css,no_foldcolumn,expand_tabs,prevent_copy=">
<meta name="colorscheme" content="none">
<style type="text/css">
<!--
pre { font-family: monospace; color: #000000; background-color: #ffffff; }
body { font-family: monospace; color: #000000; background-color: #ffffff; }
* { font-size: 1em; }
.Statement { color: #af5f00; }
.Comment { color: #0000c0; }
.Constant { color: #c00000; }
.Special { color: #c000c0; }
-->
</style>

<script type='text/javascript'>
<!--

-->
</script>
</head>
<body>
<pre id='vimCodeElement'>
<span class="Comment">#!/bin/sh</span>
<span class="Comment"># see also `man grep` and `man 7 regex`</span>

<span class="Comment">## concatenation</span>

<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Statement">'</span><span class="Constant">a</span><span class="Statement">'</span>    <span class="Comment"># abc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Statement">'</span><span class="Constant">aa</span><span class="Statement">'</span>   <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Statement">'</span><span class="Constant">ab</span><span class="Statement">'</span>   <span class="Comment"># abc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Statement">'</span><span class="Constant">ab.</span><span class="Statement">'</span>  <span class="Comment"># abc</span>

<span class="Comment">## brackets</span>

<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Statement">'</span><span class="Constant">a[bd]c</span><span class="Statement">'</span>       <span class="Comment"># abc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Statement">'</span><span class="Constant">a\[bd\]c</span><span class="Statement">'</span>     <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">a[bd]c</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Statement">'</span><span class="Constant">a[bd]c</span><span class="Statement">'</span>    <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">a[bd]c</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Statement">'</span><span class="Constant">a\[bd\]c</span><span class="Statement">'</span>  <span class="Comment"># a[bd]c</span>

<span class="Comment">## extended regular expressions</span>

<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a[bd]c</span><span class="Statement">'</span>       <span class="Comment"># abc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a\[bd\]c</span><span class="Statement">'</span>     <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">a[bd]c</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a[bd]c</span><span class="Statement">'</span>    <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">a[bd]c</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a\[bd\]c</span><span class="Statement">'</span>  <span class="Comment"># a[bd]c</span>

<span class="Comment">## ranges and bracket expressions</span>

<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a[bcdef]c</span><span class="Statement">'</span>      <span class="Comment"># abc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a[b-f]c</span><span class="Statement">'</span>        <span class="Comment"># abc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a[[:alpha:]]c</span><span class="Statement">'</span>  <span class="Comment"># abc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">a1c</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a[12345]c</span><span class="Statement">'</span>      <span class="Comment"># a1c</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">a1c</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a[1-5]c</span><span class="Statement">'</span>        <span class="Comment"># a1c</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">a1c</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a[[:digit:]]c</span><span class="Statement">'</span>  <span class="Comment"># a1c</span>

<span class="Comment">## negative matching</span>

<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a[^b]c</span><span class="Statement">'</span>          <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a[^bcdef]c</span><span class="Statement">'</span>      <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a[^b-f]c</span><span class="Statement">'</span>        <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">a[^[:alpha:]]c</span><span class="Statement">'</span>  <span class="Comment">#</span>

<span class="Comment">## anchoring</span>

<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">^ab</span><span class="Statement">'</span>  <span class="Comment"># abc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">^bc</span><span class="Statement">'</span>  <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">ab$</span><span class="Statement">'</span>  <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">bc$</span><span class="Statement">'</span>  <span class="Comment"># abc</span>

<span class="Comment">## special expressions</span>

<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">bc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">\sb</span><span class="Statement">'</span>                         <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant"> bc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">\sb</span><span class="Statement">'</span>                        <span class="Comment">#  bc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant"> C_function_4_testing </span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">\s\w\s</span><span class="Statement">'</span>  <span class="Comment">#</span>

<span class="Comment">## ? operator</span>

<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">abcd</span><span class="Statement">'</span>    <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">abcd?</span><span class="Statement">'</span>   <span class="Comment"># abc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abcd</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">abcd?</span><span class="Statement">'</span>  <span class="Comment"># abcd</span>

<span class="Comment">## * operator</span>

<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abbbc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span>   <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abbbc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">ab*c</span><span class="Statement">'</span>  <span class="Comment"># abbbc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">ac</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">ab*c</span><span class="Statement">'</span>     <span class="Comment"># ac</span>

<span class="Comment">## + operator</span>

<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abbbc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span>   <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abbbc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">ab+c</span><span class="Statement">'</span>  <span class="Comment"># abbbc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">ac</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">ab+c</span><span class="Statement">'</span>     <span class="Comment">#</span>

<span class="Comment">## braces</span>

<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abbbc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span>       <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abbbc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">ab{1,2}c</span><span class="Statement">'</span>  <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abbbc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">ab{1,5}c</span><span class="Statement">'</span>  <span class="Comment"># abbbc</span>

<span class="Comment">## alternation</span>

<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">abc|def</span><span class="Statement">'</span>          <span class="Comment"># abc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">def</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">abc|def</span><span class="Statement">'</span>          <span class="Comment"># def</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abcggg</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">(abc|def)ggg</span><span class="Statement">'</span>  <span class="Comment"># abcggg</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">defggg</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">(abc|def)ggg</span><span class="Statement">'</span>  <span class="Comment"># defggg</span>

<span class="Comment">## backreferences (not necessarily linear time)</span>

<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abcabc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">(abc|def)\1</span><span class="Statement">'</span>  <span class="Comment"># abcabc</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">abcdef</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">(abc|def)\1</span><span class="Statement">'</span>  <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">defabc</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">(abc|def)\1</span><span class="Statement">'</span>  <span class="Comment">#</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">defdef</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span> <span class="Statement">'</span><span class="Constant">(abc|def)\1</span><span class="Statement">'</span>  <span class="Comment"># defdef</span>

<span class="Comment">## catastrophic backtracking</span>

<span class="Comment"># grep (1) implements basic regular expressions using a DFA engine</span>
<span class="Comment">#</span>
<span class="Comment"># perl (1) implements the more powerful Perl Compatible Regular Expressions</span>
<span class="Comment"># (PCRE) using backtracking</span>
<span class="Comment">#</span>
<span class="Comment"># <a href="https://swtch.com/~rsc/regexp/regexp1.html">https://swtch.com/~rsc/regexp/regexp1.html</a></span>
<span class="Comment">#</span>
<span class="Comment"># run the following examples in grep and perl and compare their performances</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</span><span class="Statement">'</span><span class="Constant"> </span>| grep <span class="Special">-E</span>            <span class="Statement">'</span><span class="Constant">a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</span><span class="Statement">'</span>
<span class="Statement">echo</span><span class="Constant"> </span><span class="Statement">'</span><span class="Constant">aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</span><span class="Statement">'</span><span class="Constant"> </span>| perl <span class="Special">-ne</span> <span class="Statement">'</span><span class="Constant">print if /a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?a?aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa/</span><span class="Statement">'</span>
</pre>
</body>
</html>
<!-- vim: set foldmethod=manual : -->
